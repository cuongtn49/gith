<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chọn Bài Kiểm Tra</title>
  <link rel="stylesheet" href="css/home.css">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f6fa;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      display: flex;
      gap: 20px;
    }

    /* Phần thông tin tổng quan */
    .overview {
      flex: 1;
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .overview h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    .overview p {
      margin-bottom: 15px;
      font-size: 16px;
      line-height: 1.6;
    }

    .overview .start-btn {
      display: inline-block;
      padding: 10px 20px;
      background: #4caf50;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 16px;
      transition: 0.3s ease;
    }

    .overview .start-btn:hover {
      background: #45a049;
    }

    /* Danh sách bài kiểm tra */
    .quiz-list {
      flex: 2;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .quiz-card {
      height: 150px;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: 0.3s ease;
    }

    .quiz-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 10px rgba(0, 0, 0, 0.2);
    }

    .quiz-card h2 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .quiz-card p {
      font-size: 14px;
      margin-bottom: 15px;
    }

    .quiz-card .select-btn {
      display: inline-block;
      padding: 10px 15px;
      background: #fff;
      color: #6a11cb;
      text-decoration: none;
      border-radius: 5px;
      font-size: 14px;
      transition: 0.3s ease;
    }

    .quiz-card .select-btn:hover {
      background: #eee;
    }

    /* Căn chỉnh các tùy chọn */
    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }

    input[type="number"] {
      padding: 5px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 80px;
    }

    li {
      list-style: none;
    }

    #divideNumberQS {
      margin: 50px auto;
      padding: 40px;
      box-shadow: 0 0 5px 0 silver;
      width: 400px;
      height: 350px;
      background-color: white;
    }

    table {
      display: flex;
      justify-content: center;
    }

    
    /* Media Queries cho các thiết bị nhỏ */
@media (max-width: 768px) {
  .container {
    flex-direction: column;
    padding: 10px;
  }

  .overview,
  .quiz-list {
    flex: none;
    width: 100%;
  }

  .overview h1 {
    font-size: 24px;
  }

  .overview p {
    font-size: 14px;
  }

  .quiz-card h2 {
    font-size: 18px;
  }

  .quiz-card p {
    font-size: 12px;
  }
}

/* Media Queries cho các thiết bị cực kỳ nhỏ */
@media (max-width: 480px) {
  .overview h1 {
    font-size: 20px;
  }

  .overview p {
    font-size: 12px;
  }

  .quiz-card h2 {
    font-size: 16px;
  }

  .quiz-card p {
    font-size: 10px;
  }

  #divideNumberQS {
    width: 90%;
    height: auto;
  }
}

    /* #Home {
      position: absolute;
      top: 20px;
      left: 30px;
    }

    #img-home {
      width: 20px;
      transition: width 0.3s ease;
    }

    #img-home:hover {
      width: 30px;
    } */
  </style>
</head>

<body>
  <header style="padding: 15px 20px; background: #333; color: white; text-align: center;">
    <h1>Hệ Thống Trắc Nghiệm Online</h1>
    <div id="Home">
      <a href="mobie.html"><img id="img-home" src="image/3d-house.png" alt=""></a>
    </div>
  </header>

  <div class="container" id="container">
    <!-- Phần thông tin tổng quan -->
    <div class="overview">
      <h1>Thiết lập Bài Kiểm Tra</h1>
      <p>Hãy chọn một bài kiểm tra để bắt đầu! Bạn có thể kiểm tra kiến thức qua các câu hỏi trắc nghiệm thú vị và đầy
        thử thách.</p>
      <h4>Chọn các hình thức câu hỏi cho bài kiểm tra</h4>
      <input type="checkbox" id="multiple-choice"> Trắc Nghiệm<br>
      <input type="checkbox" id="fill-word"> Điền Từ<br>
      <ul id="fill-word-method" style="display: none;">
        <li><input type="radio" name="fill-word-method" id="answer"> Điền đáp án<br></li>
        <li><input type="radio" name="fill-word-method" id="question"> Điền câu hỏi<br></li>
      </ul>
      <input type="checkbox" id="true-false"> Đúng Sai <br>
      <input type="checkbox" disabled> Nối cột <br>
      <input type="checkbox" disabled> Nghe và điền đáp án (nghe tiếng anh) <br>
      <input type="checkbox" disabled> Nghe và chọn đáp án (nghe tiếng anh) <br>
      <input type="checkbox" disabled> Nghe và chọn đúng sai (nghe tiếng anh) <br>
      <p>
        <b>Thời gian:</b> <input type="number" style="width: 60px;" id="time-test" min="1" value="1"> phút<br>
        <b>Số câu hỏi:</b> <input type="number" style="width: 60px;" id="number-qs" min="1" value="1"> câu
      </p>
      <button id="start-test-btn">Bắt đầu</button>
      <button id="format-number-question">Phân chia số câu</button>
    </div>


    <!-- Danh sách bài kiểm tra -->
    <div class="quiz-list">
      <div class="quiz-card">
        <h2>Trắc Nghiệm & Điền Đáp Án & Chọn Đúng Sai</h2>
        <p>Kiểm tra kiến thức cơ bản và rèn luyện kỹ năng suy luận, ghi nhớ.</p>
        <a href="#" class="select-btn" onclick="test1()">Làm bài</a>
      </div>

      <div class="quiz-card">
        <h2>Điền Đáp Án & Chọn Đúng Sai</h2>
        <p>Kiểm tra kiến thức cơ bản và rèn luyện kỹ năng suy luận, ghi nhớ.</p>
        <a href="#" class="select-btn" onclick="test2()">Làm bài</a>
      </div>

      <div class="quiz-card">
        <h2>Trắc Nghiệm & Chọn Đúng Sai</h2>
        <p>Kiểm tra kiến thức cơ bản và rèn luyện kỹ năng suy luận, ghi nhớ.</p>
        <a href="#" class="select-btn" onclick="test3()">Làm bài</a>
      </div>

      <div class="quiz-card">
        <h2>Chọn Đúng Sai & Điền Đáp Án</h2>
        <p>Kiểm tra kiến thức cơ bản và rèn luyện kỹ năng suy luận, ghi nhớ.</p>
        <a href="#" class="select-btn" onclick="test4()">Làm bài</a>
      </div>
    </div>
  </div>
  <div id="divideNumberQS" style="display: none;">
    <table>
      <tr>
        <th>Hình thức câu hỏi</th>
        <th>Tỉ lệ</th>
      </tr>
      <tr>
        <td>Trắc nghiệm</td>
        <td><input class="inputNumberQS" type="number" pattern="\d*" name="multiple-choice"><span
            class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Điền đáp án</td>
        <td><input class="inputNumberQS" type="number" pattern="\d*" name="fill-word"><span
            class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Đúng sai</td>
        <td><input class="inputNumberQS" type="number" pattern="\d*" name="true-false"><span
            class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Nối cột</td>
        <td><input class="inputNumberQS" type="number" disabled><span class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Nghe và chọn đáp án</td>
        <td><input class="inputNumberQS" type="number" disabled><span class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Nghe và điền đáp án</td>
        <td><input class="inputNumberQS" type="number" disabled><span class="input-number-qs"></span></td>
      </tr>
      <tr>
        <td>Nghe và chọn đúng sai</td>
        <td><input class="inputNumberQS" type="number" disabled><span class="input-number-qs"></span></td>
      </tr>
    </table>
    <button id="cancel-divide" style="display: block; margin: 20px auto;">Hủy</button>
    <button id="submit-divide" style="display: block; margin: 20px auto;">Lưu</button>

  </div>
  <script>
    const flashcards = JSON.parse(localStorage.getItem("data")) || [];
    const fillWord = document.getElementById("fill-word");
    var temp = true;
    var saveInput = [1, 1, 1, 1, 1, 1, 1];
    fillWord.addEventListener("change", () => {
      if (fillWord.checked) {
        const selectFillWord = document.querySelectorAll('input[name="fill-word-method"]');
        selectFillWord[0].checked = true;
        document.getElementById("fill-word-method").style.display = "block";
      }
      else {
        document.getElementById("fill-word-method").style.display = "none";
        const selectFillWord = document.querySelectorAll('input[name="fill-word-method"]');
        for (let i = 0; i < selectFillWord.length; i++) {
          selectFillWord[i].checked = false;
        }
      }
    });
    document.getElementById("submit-divide").addEventListener("click", () => {
      if (checkConditions()) {
        document.getElementById("container").style.display = "flex";
        document.getElementById("divideNumberQS").style.display = "none";
        document.getElementById("multiple-choice").disabled = true;
        document.getElementById("fill-word").disabled = true;
        document.getElementById("true-false").disabled = true;
        document.getElementById("number-qs").disabled = true;
        // document.getElementById("time-test").disabled = true;
        saveSubmitDivide();
        temp = false;
      } else alert("Giá trị không hợp lệ!");

    });
    document.getElementById("cancel-divide").addEventListener("click", () => {
      document.getElementById("container").style.display = "flex";
      document.getElementById("divideNumberQS").style.display = "none";
      // document.getElementById("time-test").disabled = true;
    });

    document.getElementById("format-number-question").addEventListener("click", () => {
      const multipleChoice = document.getElementById("multiple-choice").checked;
      const fillWord = document.getElementById("fill-word").checked;
      const trueFalse = document.getElementById("true-false").checked;
      const number = document.getElementById("number-qs").value;
      if (multipleChoice || fillWord || trueFalse) {
        if (number <= flashcards.length) {
          if (number >= 1) {
            document.getElementById("container").style.display = "none";
            document.getElementById("divideNumberQS").style.display = "block";
            DivideNunmberQPProcessing();
            if (temp) setValueInput(); else displayValueInput();

          } else alert("Số lượng câu hỏi không được bé hơn hoặc bằng 0");
        } else {
          alert("Số lượng câu hỏi của đề thi vượt quá CSDL");
        }
      } else alert("Phải chọn ít nhất một hình thức câu hỏi");


    });
    function DivideNunmberQPProcessing() {
      const inputNumber = document.getElementsByClassName("input-number-qs");
      var input = document.getElementsByClassName("inputNumberQS");
      function addLimnitQS() {
        for (let i = 0; i < inputNumber.length; i++) {
          if (!input[i].disabled) inputNumber[i].textContent = ` / ${document.getElementById("number-qs").value}`;
          // inputNumber[i].style.fontSize = "18px";
        }
      }
      addLimnitQS();
    }
    function setValueInput() {
      var input = document.getElementsByClassName("inputNumberQS");
      for (let i = 0; i < input.length; i++) {
        if (!input[i].disabled) input[i].value = document.getElementById("number-qs").value;
      }
    }
    function displayValueInput() {
      var input = document.getElementsByClassName("inputNumberQS");
      for (let i = 0; i < input.length; i++) {
        if (!input[i].disabled) input[i].value = saveInput[i];
      }
    }
    function saveSubmitDivide() {
      var input = document.getElementsByClassName("inputNumberQS");
      for (let i = 0; i < input.length; i++) {
        if (!input[i].disabled) saveInput[i] = input[i].value;
        else saveInput[i] = 0;
      }
    }
    function checkConditions() {
      var input = document.getElementsByClassName("inputNumberQS");
      var limit = document.getElementById("number-qs").value;
      for (let i = 0; i < input.length; i++) {
        if (!input[i].disabled) {
          // console.log("a"+input[i].value);
          // console.log("b"+limit);
          // console.log(input[i].value <= 0);
          // console.log(input[i].value > parseInt(limit));
          // console.log(typeof limit);
          if (input[i].value <= 0 || input[i].value > parseInt(limit)) {
            return false;
          }
        }
      }
      return true;

    }
    document.getElementById("multiple-choice").addEventListener("change", () => {
      lockNotSelected();
      console.log(saveInput);
    });
    document.getElementById("fill-word").addEventListener("change", () => {
      lockNotSelected();
      console.log(saveInput);
    });
    document.getElementById("true-false").addEventListener("change", () => {
      lockNotSelected();
      console.log(saveInput);
    });
    function lockNotSelected() {
      const multipleChoice = document.getElementById("multiple-choice");
      const fillWord = document.getElementById("fill-word");
      const trueFalse = document.getElementById("true-false");
      var input = document.getElementsByClassName("inputNumberQS");
      for (let i = 0; i < input.length; i++) {
        if (input[i].name === multipleChoice.id) {
          input[i].disabled = !multipleChoice.checked;
        }
        if (input[i].name === fillWord.id) {
          input[i].disabled = !fillWord.checked;
        }
        if (input[i].name === trueFalse.id) {
          input[i].disabled = !trueFalse.checked;
        }
      }
    }
    document.getElementById("number-qs").addEventListener("blur", () => {
      var input = document.getElementsByClassName("inputNumberQS");
      for (let i = 0; i < input.length; i++) {
        if (!input[i].disabled) {
          saveInput[i] = document.getElementById("number-qs").value;
        } else saveInput[i] = 0;
      }
      console.log(saveInput);
    });
    function setSaveInput() {
      var input = document.getElementsByClassName("inputNumberQS");
      var checkbox = document.querySelectorAll("#multiple-choice, #fill-word, #true-false");
      for (let i = 0; i < checkbox.length; i++) {
        for (let j = 0; j < input.length; j++) {
          if (input[j].name === checkbox[i].id) {
            if (!checkbox[i].checked) {
              saveInput[j] = 0;
            }
          }
        }
      }
    }

    function countChecked() {
      var count = 0;
      const multipleChoice = document.getElementById("multiple-choice").checked;
      const fillWord = document.getElementById("fill-word").checked;
      const trueFalse = document.getElementById("true-false").checked;
      if (multipleChoice) count++;
      if (fillWord) count++;
      if (trueFalse) count++;
      return count;
    }
    document.getElementById("start-test-btn").addEventListener("click", () => {
      const multipleChoice = document.getElementById("multiple-choice").checked;
      const fillWord = document.getElementById("fill-word").checked;
      const trueFalse = document.getElementById("true-false").checked;
      const question = document.getElementById("question").checked;
      const answer = document.getElementById("answer").checked;
      const number = document.getElementById("number-qs").value;
      const time = document.getElementById("time-test").value;
      console.log(multipleChoice);
      console.log(fillWord);
      console.log(trueFalse);
      console.log(question);
      console.log(answer);
      console.log(number);
      console.log(time);
      const arr = { multipleChoice, fillWord, trueFalse, question, answer, number, time };
      console.log(arr);
      if (multipleChoice || fillWord || trueFalse) {
        if (number <= flashcards.length) {
          if (number >= 1) {
            console.log(saveInput);
            localStorage.setItem("test-structure", JSON.stringify(arr));
            window.location.href = "test.html";
          } else alert("Số lượng câu hỏi không được bé hơn hoặc bằng 0");
        } else {
          alert("Số lượng câu hỏi của đề thi vượt quá CSDL");
        }
      } else alert("Phải chọn ít nhất một hình thức câu hỏi");
    });
    function test1() {
      const arr = { multipleChoice: true, fillWord: true, trueFalse: true, question: false, answer: true, number: 10, time: 2 };
      localStorage.setItem("test-structure", JSON.stringify(arr));
      window.location.href = "test.html";
    }
    function test2() {
      const arr = { multipleChoice: false, fillWord: true, trueFalse: true, question: false, answer: true, number: 10, time: 1 };
      localStorage.setItem("test-structure", JSON.stringify(arr));
      window.location.href = "test.html";
    }
    function test3() {
      const arr = { multipleChoice: true, fillWord: false, trueFalse: true, question: false, answer: true, number: 10, time: 1 };
      localStorage.setItem("test-structure", JSON.stringify(arr));
      window.location.href = "test.html";
    }
    function test4() {
      const arr = { multipleChoice: true, fillWord: true, trueFalse: false, question: true, answer: false, number: 10, time: 1 };
      localStorage.setItem("test-structure", JSON.stringify(arr));
      window.location.href = "test.html";
    }






  </script>

</body>

</html>